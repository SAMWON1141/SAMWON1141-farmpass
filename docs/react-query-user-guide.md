# 🚀 React Query 마이그레이션 사용자 가이드

## 📖 개요

이 가이드는 Farm Management Application에서 React Query 기반으로 마이그레이션된 새로운 데이터 관리 시스템의 사용법을 설명합니다.

## 🎯 주요 개선사항

### ✅ 성능 향상
- **스마트 캐싱**: 동일한 데이터 재요청 시 캐시에서 즉시 제공
- **백그라운드 동기화**: 네트워크 재연결 시 자동 데이터 갱신
- **무한 스크롤**: 대용량 데이터 효율적 로딩

### ✅ 사용자 경험 개선
- **실시간 업데이트**: 다른 사용자의 변경사항 실시간 반영
- **낙관적 업데이트**: 서버 응답 대기 없이 UI 즉시 반영
- **지능적 에러 처리**: 네트워크 오류 시 자동 재시도

### ✅ 개발자 경험 향상
- **DevTools 통합**: React Query DevTools로 실시간 모니터링
- **타입 안전성**: TypeScript 기반 완전한 타입 안전성
- **일관된 API**: 모든 데이터 관리 로직 표준화

## 🛠️ 주요 기능 사용법

### 1. 대시보드 (`/admin/dashboard`)

#### 📊 실시간 통계
```
✓ 자동 캐싱으로 빠른 로딩
✓ 백그라운드에서 최신 데이터 동기화
✓ 농장별 필터링 지원
```

#### 📈 차트 및 그래프
- 방문자 트렌드 실시간 업데이트
- 농장별 통계 비교
- 월별/주별 데이터 분석

### 2. 방문자 관리 (`/admin/visitors`)

#### 🔍 고급 필터링
```
✓ 실시간 검색 (이름, 전화번호)
✓ 날짜 범위 필터
✓ 농장별 필터
✓ 방역 여부, 동의 여부 필터
```

#### 📱 무한 스크롤
- 페이지별 20개씩 자동 로딩
- 스크롤하며 추가 데이터 로딩
- 모바일 최적화

#### ⚡ 실시간 CRUD
- 방문자 추가 시 목록 즉시 업데이트
- 수정/삭제 시 낙관적 업데이트
- 에러 발생 시 자동 롤백

### 3. 농장 관리 (`/admin/farms`)

#### 🏠 농장 목록
```
✓ 카드 형태의 직관적 UI
✓ 농장별 멤버 수 실시간 표시
✓ 검색 및 필터링
```

#### 👥 멤버 관리
- 역할별 멤버 표시 (소유자, 관리자, 일반)
- 아바타 이미셜 자동 생성
- 실시간 멤버 추가/제거

### 4. 농장별 상세 관리

#### 방문자 현황 (`/admin/farms/[farmId]/visitors`)
```
✓ 농장별 방문자 목록
✓ 통계 정보 실시간 업데이트
✓ 엑셀 내보내기
```

#### 멤버 관리 (`/admin/farms/[farmId]/members`)
```
✓ 멤버 추가/제거
✓ 권한 변경
✓ 활동 로그
```

## 🎮 React Query DevTools 사용법

### 접근 방법
1. 개발 모드에서 앱 실행
2. 화면 하단의 React Query 아이콘 클릭
3. DevTools 패널 열기

### 주요 기능
```
📊 Query 상태 모니터링
  - fresh: 최신 데이터
  - stale: 갱신 필요
  - fetching: 로딩 중
  - error: 오류 상태

🔄 캐시 관리
  - Query 수동 무효화
  - 캐시 데이터 확인
  - 리패치 트리거

📈 성능 분석
  - 네트워크 요청 횟수
  - 캐시 히트율
  - 렌더링 최적화 상태
```

## 🚨 문제 해결

### 자주 발생하는 이슈

#### 1. 데이터가 업데이트되지 않을 때
```
해결책:
1. 브라우저 새로고침 (Ctrl+F5)
2. React Query DevTools에서 해당 Query 무효화
3. 네트워크 연결 상태 확인
```

#### 2. 로딩이 오래 걸릴 때
```
해결책:
1. 네트워크 상태 확인
2. 필터 조건 단순화
3. 개발자 도구 Network 탭 확인
```

#### 3. 에러가 지속될 때
```
해결책:
1. 로그아웃 후 재로그인
2. 브라우저 캐시 삭제
3. 관리자에게 문의
```

## 📱 모바일 사용법

### 반응형 디자인
- 모든 페이지 모바일 최적화
- 터치 친화적 UI
- 작은 화면 전용 레이아웃

### 모바일 전용 기능
```
🔄 풀다운 새로고침
📱 무한 스크롤 최적화
👆 터치 제스처 지원
```

## 🔧 고급 설정

### 캐시 설정
```typescript
// 기본 캐시 시간 (5분)
staleTime: 5 * 60 * 1000

// 백그라운드에서 유지 시간 (10분)  
gcTime: 10 * 60 * 1000
```

### 재시도 정책
```typescript
// 네트워크 오류: 3번 재시도
// 인증 오류: 재시도 안함
// 서버 오류: 1번 재시도
```

## 📞 지원 및 문의

### 기술 지원
- 개발팀: dev@farmmanagement.com
- 사용자 가이드: docs.farmmanagement.com
- 이슈 리포트: GitHub Issues

### 업데이트 알림
- 새로운 기능 추가 시 앱 내 알림
- 중요 변경사항 이메일 통지
- 정기 업데이트 체크

---

**🎉 React Query 마이그레이션으로 더욱 빠르고 안정적인 Farm Management 서비스를 경험하세요!**
